"use strict";(self.webpackChunkmedicine_delivery_frontend=self.webpackChunkmedicine_delivery_frontend||[]).push([[181],{931:(n,e,t)=>{t.d(e,{A:()=>r});const r=t(154).A.create({baseURL:"https://medicine-delivery-backend-t1jj.onrender.com/"})},181:(n,e,t)=>{t.r(e),t.d(e,{default:()=>U});var r=t(43),a=t(931);const i=async()=>{const{data:n}=await a.A.get("/api/pharmacies");return n};var o,s,c,d=t(528),l=t(197);const g=l.Ay.div(o||(o=(0,d.A)(["\n  width: 20vw;\n  height: 100%;\n  border: 1px solid #333;\n  border-radius: 10px;\n  padding: 20px;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n"]))),p=l.Ay.h3(s||(s=(0,d.A)(["\n  margin-bottom: 20px;\n"]))),h=l.Ay.li(c||(c=(0,d.A)(["\n  border: 1px solid #333;\n  border-radius: 5px;\n  text-align: center;\n  padding: 20px;\n  transition: background-color 0.5s ease-out;\n  &:not(:last-child) {\n    margin-bottom: 10px;\n  }\n  &:hover,\n  &:focus {\n    background-color: lightgray;\n    transition: background-color 0.5s ease-out;\n  }\n  ","\n"])),(n=>n.selected&&"\n    background-color: lightgray;\n  "));var u=t(579);const x=n=>{let{onSelect:e,selectedPahrmacy:t}=n;const[a,o]=(0,r.useState)([]);return(0,r.useEffect)((()=>{(async()=>{try{const n=await i();o(n)}catch(n){console.log("Error getting pharmacies list",n)}})()})),(0,u.jsxs)(g,{children:[(0,u.jsx)(p,{children:"Pharmacies:"}),(0,u.jsx)("ul",{children:a&&a.map((n=>(0,u.jsx)(h,{onClick:()=>e(n._id),selected:t===n._id,children:(0,u.jsx)("p",{children:n.name})},n._id)))})]})};var y,f,m,v,b,A,w;const j=l.Ay.ul(y||(y=(0,d.A)(["\n  width: 80vw;\n  height: 80vh;\n  border: 1px solid #333;\n  border-radius: 10px;\n  display: flex;\n  flex-wrap: wrap;\n  padding: 15px;\n  gap: 10px;\n  overflow-y: scroll;\n"]))),k=l.Ay.li(f||(f=(0,d.A)(["\n  border: 1px solid #333;\n  border-radius: 5px;\n  width: calc((100% / 3) - 10px);\n  height: 300px;\n"]))),S=l.Ay.div(m||(m=(0,d.A)(["\n  width: 200px;\n  height: 200px;\n  border-radius: 5px;\n  overflow: hidden;\n  margin: 0 auto;\n"]))),_=l.Ay.p(v||(v=(0,d.A)(["\n  font-weight: 600;\n  margin: 5px;\n"]))),E=l.Ay.button(b||(b=(0,d.A)(["\n  padding: 5px;\n  border-radius: 5px;\n  border: 1px solid #333;\n  transition: background-color 0.5s ease-out;\n\n  &:hover,\n  &:focus {\n    background-color: lightgrey;\n    transition: background-color 0.5s ease-out;\n  }\n"]))),C=l.Ay.div(A||(A=(0,d.A)(["\n  display: flex;\n  justify-content: space-between;\n  margin: 20px 5px;\n"]))),P=l.Ay.button(w||(w=(0,d.A)(["\n  background-color: transparent;\n  border: none;\n\n  ","\n  ","\n"])),(n=>"false"===n.favorite&&"color: black;"),(n=>"true"===n.favorite&&"color: red;"));var L=t(686);const q=n=>{let{drugsList:e,changeFavorite:t}=n;const[a,i]=(0,r.useState)((()=>JSON.parse(localStorage.getItem("medicineCart"))||[]));(0,r.useEffect)((()=>{localStorage.setItem("medicineCart",JSON.stringify(a))}),[a]);return(0,u.jsx)(j,{children:e.length>0&&e.map((n=>(0,u.jsxs)(k,{children:[(0,u.jsx)(S,{children:(0,u.jsx)("img",{src:n.photo,alt:n.name,width:"200",height:"200"})}),(0,u.jsx)(_,{children:n.name}),(0,u.jsxs)(C,{children:[(0,u.jsxs)("p",{children:["Price: ",n.price," \u20b4"]}),(0,u.jsx)(E,{type:"button",onClick:()=>(n=>{const e={...n,quantity:1},t=a.find((e=>e.name===n.name&&e.pharmacy===n.pharmacy));"undefined"!==typeof t?(t.quantity+=1,i([...a])):i((n=>[...n,e]))})(n),children:"Add to cart"}),(0,u.jsx)(P,{onClick:()=>t(n),favorite:n.favorite.toString(),children:(0,u.jsx)(L.MUx,{})})]})]},n._id)))})},F=async n=>{const{data:e}=await a.A.get("/api/drugs/".concat(n));return e},I=async()=>{const{data:n}=await a.A.get("/api/drugs");return n},J=async(n,e)=>{const{data:t}=await a.A.patch("/api/drugs/".concat(n,"/favorite"),{favorite:e});return t};var N;const O=l.Ay.div(N||(N=(0,d.A)(["\n  display: flex;\n  gap: 10px;\n"]))),U=()=>{const[n,e]=(0,r.useState)(null),[t,a]=(0,r.useState)([]);(0,r.useEffect)((()=>{(async()=>{try{const n=await I();a(n)}catch(n){console.log("Error while getting drugs list",n)}})()}),[]),(0,r.useEffect)((()=>{n&&(async()=>{try{const e=await F(n);a(e)}catch(e){console.log("Error while getting drugs list",e)}})()}),[n]);return(0,u.jsxs)(O,{children:[(0,u.jsx)(x,{onSelect:n=>{e(n)},selectedPahrmacy:n}),(0,u.jsx)(q,{drugsList:t,changeFavorite:async n=>{try{const e=await J(n._id,!n.favorite);a((n=>n.map((n=>n._id===e._id?{...n,favorite:e.favorite}:n))))}catch(e){console.log("Error while marking drug as favorite",e)}}})]})}}}]);
//# sourceMappingURL=181.d07fcb21.chunk.js.map