"use strict";(self.webpackChunkmedicine_delivery_frontend=self.webpackChunkmedicine_delivery_frontend||[]).push([[875],{931:(n,e,t)=>{t.d(e,{A:()=>r});const r=t(154).A.create({baseURL:"https://medicine-delivery-backend-t1jj.onrender.com/"})},875:(n,e,t)=>{t.r(e),t.d(e,{default:()=>T});var r,i,a,o,s,d=t(43),l=t(528),c=t(197);const p=c.Ay.div(r||(r=(0,l.A)(["\n  width: 40vw;\n  height: 80vh;\n  border: 1px solid #333;\n  border-radius: 10px;\n  padding: 15px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex-direction: column;\n"]))),x=c.Ay.label(i||(i=(0,l.A)(["\n  margin: 20px 0 10px 0;\n"]))),u=c.Ay.input(a||(a=(0,l.A)(["\n  width: 75%;\n  border-radius: 5px;\n  border: 1px solid #333;\n  padding: 10px;\n  margin-bottom: 20px;\n"]))),h=c.Ay.div(o||(o=(0,l.A)(["\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  gap: 100px;\n  margin-top: 10px;\n"]))),m=c.Ay.button(s||(s=(0,l.A)(["\n  padding: 10px;\n  width: 150px;\n  border: 1px solid #333;\n  border-radius: 10px;\n  transition: background-color 0.5s ease-out;\n\n  &:hover,\n  &:focus {\n    background-color: lightgrey;\n    transition: background-color 0.5s ease-out;\n  }\n"])));var g=t(579);const y=n=>{let{onSubmit:e,calculateTotalPrice:t}=n;return(0,g.jsxs)("form",{onSubmit:n=>e(n),children:[(0,g.jsxs)(p,{children:[(0,g.jsx)(x,{htmlFor:"name",children:"Name:"}),(0,g.jsx)(u,{type:"text",name:"name",id:"name"}),(0,g.jsx)(x,{htmlFor:"email",children:"Email:"}),(0,g.jsx)(u,{type:"email",name:"email",id:"email"}),(0,g.jsx)(x,{htmlFor:"phone",children:"Phone:"}),(0,g.jsx)(u,{type:"tel",name:"phone",id:"phone"}),(0,g.jsx)(x,{htmlFor:"address",children:"Address:"}),(0,g.jsx)(u,{type:"text",name:"address",id:"address"})]}),(0,g.jsxs)(h,{children:[(0,g.jsxs)("h3",{children:["TotalPrice: ",t()," \u20b4"]}),(0,g.jsx)(m,{type:"submit",children:"Submit"})]})]})};var b,j,v,f,A;const w=c.Ay.ul(b||(b=(0,l.A)(["\n  width: 60vw;\n  height: 80vh;\n  border: 1px solid #333;\n  border-radius: 10px;\n  padding: 15px;\n  overflow-y: scroll;\n  text-align: center;\n"]))),k=c.Ay.li(j||(j=(0,l.A)(["\n  width: 98%;\n  border: 1px solid #333;\n  border-radius: 5px;\n  padding: 5px;\n  display: flex;\n  align-items: center;\n  gap: 10px;\n  position: relative;\n  &:not(:last-child) {\n    margin-bottom: 20px;\n  }\n"]))),C=c.Ay.h3(v||(v=(0,l.A)(["\n  margin-bottom: 20px;\n"]))),_=c.Ay.p(f||(f=(0,l.A)(["\n  margin-bottom: 10px;\n"]))),F=c.Ay.button(A||(A=(0,l.A)(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  top: 10px;\n  right: 10px;\n  background-color: transparent;\n  position: absolute;\n  border: 1px solid #333;\n  width: 30px;\n  height: 30px;\n  padding: 4px;\n  border-radius: 50%;\n\n  transition: background-color 0.5s ease-out;\n\n  &:hover,\n  &:focus {\n    background-color: lightgrey;\n    transition: background-color 0.5s ease-out;\n  }\n"])));var S=t(825),q=t(441);const I=n=>{let{cartItems:e,deleteFromCart:t,handleQuantityChange:r}=n;return(0,g.jsx)(w,{children:0!==e.length?e.map((n=>(0,g.jsxs)(k,{children:[(0,g.jsx)("div",{children:(0,g.jsx)("img",{src:n.photo,alt:n.name,width:"200",height:"200"})}),(0,g.jsxs)("div",{children:[(0,g.jsx)(C,{children:n.name}),(0,g.jsxs)(_,{children:["Price: ",n.price," \u20b4"]}),(0,g.jsx)("label",{htmlFor:"quantity",children:"Quantity: "}),(0,g.jsx)("input",{type:"number",name:"quantity",defaultValue:n.quantity,onChange:e=>r(e.target.value,n._id)}),(0,g.jsx)(F,{type:"button",onClick:()=>t(n._id),children:(0,g.jsx)(q.Vx.Provider,{value:{size:"20px"},children:(0,g.jsx)(S.zhF,{})})})]})]},n._id))):(0,g.jsx)("p",{children:"Cart is empty :("})})};var P=t(931);const E=async n=>{const{data:e}=await P.A.post("/api/orders",n);return e};var N;const Q=c.Ay.div(N||(N=(0,l.A)(["\n  display: flex;\n  gap: 10px;\n"]))),T=()=>{const[n,e]=(0,d.useState)((()=>JSON.parse(localStorage.getItem("medicineCart"))||[]));(0,d.useEffect)((()=>{localStorage.setItem("medicineCart",JSON.stringify(n))}),[n]);const t=()=>{let e=0;return n.forEach((n=>e+=n.quantity*n.price)),e};return(0,g.jsx)(g.Fragment,{children:(0,g.jsxs)(Q,{children:[(0,g.jsx)(y,{onSubmit:async r=>{r.preventDefault();const i=(e=>{const{name:r,email:i,phone:a,address:o}=e,s=t(),d=n.map((n=>({productId:n._id,quantity:n.quantity})));return{name:r.value,email:i.value,phone:a.value,address:o.value,price:s,products:d}})(r.target.elements);await(async n=>{try{const t=await E(n);console.log(t),e([])}catch(r){console.log("Error while creating an order",r)}})(i),r.target.reset()},calculateTotalPrice:t}),(0,g.jsx)(I,{cartItems:n,deleteFromCart:n=>{e((e=>{const t=[...e],r=t.findIndex((e=>e._id===n));return-1!==r&&t.splice(r,1),t}))},handleQuantityChange:(n,t)=>{e((e=>{const r=[...e],i=r.findIndex((n=>n._id===t));return-1!==i&&(r[i].quantity+=n),r}))}})]})})}}}]);
//# sourceMappingURL=875.aad7ea10.chunk.js.map